(function(b){var a=window.AmazonUIPageJS||window.P,f=a._namespace||a.attributeErrors,c=f?f("AmazonGatewayAuiAssets"):a;c.guardFatal?c.guardFatal(b)(c,window):c.execute(function(){b(c,window)})})(function(b,a,f){b.register("gateway-asset-load",function(){a.uet&&a.uet("cf","gateway-asset-load",{wb:1});a.uex&&a.uex("ld","gateway-asset-load",{wb:1})});b.when("A","load").execute("ah-inst-img-size",function(c){function k(a){if(!a)return null;var g=d(a).attr("src");a=d(a).data("a-hires");return g===a?null:
g}function h(a){"object"===typeof g.ue&&"function"===typeof g.ue.count&&g.ue&&g.ue.count(a,(g.ue.count(a)||0)+1)}function n(a,g){h("gw-img-size-invoke");d.ajax({type:"HEAD",async:!0,url:a,success:function(a,b,m){h("gw-img-size-success");c.trigger(g,parseInt(m.getResponseHeader("Content-Length"),10))},error:function(a,g,b){h("gw-img-size-error")}})}function l(a,b){0<a.length&&(m[b]={count:a.length,totalSize:0,images:d.unique(a)},d(m[b].images).each(function(a,d){var q=b+"_"+a;c.on(q,function(a){isNaN(a)||
(--m[b].count,m[b].totalSize+=a,0===m[b].count&&g.ue&&g.ue.count(b,m[b].totalSize))});n(d,q)}))}function p(a,g){g=g||a.length;var e=[];d(a.slice(0,g)).each(function(a,g){var b=k(g);if(!b)return[];e.push(b)});return e}var d=c.$,g=a,m=[];b.execute("inst-cf-img",function(){h("gw-inst-img");var a=c.$(".gw-critical-content img");(a=0>=a.length?null:k(a[0]))&&l([a],"gw-cf-img-size")});b.when("x1").execute("inst-x1-img",function(){b.execute("inst-x1-rec-img",function(){var a=1;d("#gw-content-grid .feed-carousel .feed-carousel-shelf").slice(0,
2).each(function(g,e){if(2>=a){var b="gw-shoveler-img-size-"+a++,m=d(e).find("img");6<=m.length&&(m=p(m,6),l(m,b))}})})})});b.when("A").register("dombinder",function(a){function b(a,d){var g=0;d=d.split(".");for(var m=d.length;g<m;g++)a=a&&a[d[g]];return a}function h(a){return n.map(n(a).data("bind").split(","),function(b){b=b.split(":");var g=n.trim(b[0]),m=n.trim(b[1]),q=l[g];if(q)return q.init&&q.init(a,m),function(g){q.update(a,m,g)}})}var n=a.$,l={text:{update:function(a,d,g){n(a).text(b(g,
d)||"")}},html:{update:function(a,d,g){n(a).html(b(g,d)||"")}},href:{update:function(a,d,g){n(a).attr("href",b(g,d)||"")}},trimText:{update:function(a,b,g){a=n(a);g=a.text();if(g.length>b){for(var m=b-4;0<=m&&0<"[.,-/#!$%^&*;:{}=-_`~()] ".indexOf(g[m]);)m--;a.text(g.substring(0,0<=m?m+1:b-3)+"...")}}},value:{update:function(a,d,g){n(a).val(b(g,d)||"")}},visible:{update:function(a,d,g){var m=!1;"!"===d.charAt(0)&&(m=!0,d=d.substring(1));d=!!b(g,d);m!==d?n(a).show():n(a).hide()}},css:{init:function(a,
b){var g=n(a),m=g.data("dombcss")||[];m[b]="";g.data("dombcss",m)},update:function(a,d,g){a=n(a);var m=a.data("dombcss"),q=m[d];g=b(g,d);q!==g&&(m[d]=g,q&&a.removeClass(q),g&&a.addClass(g))}},attr:{init:function(a,b){var g=n(a),m=g.data("dombattr")||[];m[b]={};g.data("dombattr",m)},update:function(a,d,g){var m=n(a);a=m.data("dombattr");var q=a[d];g=b(g,d);q!==g&&(a[d]=g,q&&n.each(q,function(a,e){m.removeAttr(a)}),g&&n.each(g,function(a,e){m.attr(a,e)}))}}};return{init:function(a){var b={$root:a,bindings:[]};
a.find("[data-bind]").each(function(){n.each(h(this),function(a,m){b.bindings.push(m)})});return b},update:function(a,b){n.each(a.bindings,function(a,m){m(b)})}}});b.when("jQuery").register("gwAjax",function(b){return function(k,h){function n(g,b,q){"object"===typeof a.ue&&"function"===typeof a.ue.count&&(l(h.errorCounter||"gwAjaxError"),h.id&&l("gwAjaxError:"+h.id));"function"===typeof a.ueLogError&&a.ueLogError({logLevel:"WARN",attribution:"gwAjax-"+(h.id||k),message:"gwAjax call failed "+
(JSON&&JSON.stringify?JSON.stringify({url:k,"params-data":h.params||h.data}):"")});"function"===typeof d&&d(g,b,q)}function l(b){"object"===typeof a.ue&&"function"===typeof a.ue.count&&a.ue.count(b,(a.ue.count(b)||0)+1)}h=b.extend(!0,{},h);var p=h.success,d=h.error;h.success=function(a,b,d){a.error?n(a,b,d):"function"===typeof p&&p(a,b,d)};h.error=n;h.data=h.params?h.params:h.data;l("gwAjaxCall");h.ajaxCounter&&l(h.ajaxCounter);return b.ajax(k,h)}});b.when("jQuery","gw-hud-punt").execute("gw-hud-sidekick",
function(a){a("#gw-hud-grid").css({display:"none"})});b.when("A","a-modal","gw-productdb","productdb-binding-helper","sg-media-builder","gw-sims","gw-popover-data").register("gw-popover",function(b,k,h,n,l,p,d){function g(e,b){a.uet&&a.uet(e,b,{wb:1})}function m(e){if(a.ue&&"function"===typeof a.ue.count)return a.ue.count(e)||0}function q(e){a.ue&&"function"===typeof a.ue.count&&a.ue.count(e,(a.ue.count(e)||0)+1)}function r(a){return a.closest("*[data-sgproduct]").data("sgproduct")}function e(a){a=
a.closest(".shogun-widget");return!a.length||a.hasClass("card-lite")?"/ah/ajax/product":"/gp/gw/ajax/pdb.html"}function f(a,e,b){x[a.asin]&&x[a.asin].isResolved()?C.resetSimData():(x[a.asin]=v.Deferred(),a&&a.asin&&e&&b?C.fetch(a,e,x[a.asin],b):x[a.asin].reject())}var v=b.$,w={},x={};if(!v("html").hasClass("a-touch")){var t=v('<span style="display: none" />').appendTo("body"),u=v("#gw-popover-wrapper"),B=new n(h,u),z=k.create(t,{name:"gw-asin-popover",width:"90%","max-width":900,height:590,popoverLabel:d.popoverLabel,
closeButton:!1}),C=new p(B),A=v("#gw-quick-look-btn");v("#a-page").delegate("li[data-sgproduct]","mouseenter",function(a){a=v(a.currentTarget);a.closest(".deals-shoveler").length||(a.append(A),a.find("[title]").removeAttr("title"),A.addClass("active"))});A.mouseenter(function(){var a=v(this),b=e(a),g=r(a),a=a.siblings().children("a").attr("href");f(g,a,b)});v(".bestsellers .listRow a").mouseenter(function(){var a=v(this),b=e(a),g=r(a),a=a.attr("href");f(g,a,b);!g||!g.asin||w[g.asin]&&w[g.asin].isResolved()||
!(b=h.get(g.asin))||(w[g.asin]=v.Deferred(),w[g.asin].resolve(b))});var D={};v("#a-page").delegate(".fresh-shoveler li[data-sgproduct]","mouseenter mousemove",function(a){a=v(a.currentTarget);if(!a.closest(".deals-shoveler").length){var g=a.data("sgproduct").asin;if(!w[g]||!w[g].isResolved()){var u=[];a.add(a.prev("li[data-sgproduct]")).add(a.next("li[data-sgproduct]")).each(function(){var a=v(this).data("sgproduct");if(a&&a.asin){var e=h.get(a.asin),g=(e=!(!D[a.asin]&&e&&e.loading))&&1500<b.now()-
D[a.asin];if(!e||g)u.push(a.asin),D[a.asin]=b.now()}});w[g]=v.Deferred();u.length?(h._ajax('{"asins": ["'+u.join('","')+'"]}',{id:"quicklook-pdb"},{url:e(a)}).done(function(a){h._add(a);for(var e=0;e<u.length;e++)D[u[e]]=Infinity;w[g].resolve(a)}).fail(w[g].reject),q("freshHoverCount")):w[g].resolve()}}});v("#a-page").delegate("li[data-sgproduct]","mouseleave",function(a){v(a.currentTarget).closest(".deals-shoveler").length||A.removeClass("active")});var H="#a-popover-"+z.attrs("id")+" ";k=v.map([".a-popover-header { display: none; }",
".a-popover-inner { padding: 0px !important; margin: 0px !important; overflow: hidden !important; height: 100% !important; }"],function(a){return H+a}).join(" ");v("head").append("<style>"+k+"</style>");b.on("a:popover:hide:gw-asin-popover",function(e){a.history.state&&a.history.state.popup&&a.history.back();B.clear()});v(a).bind("popstate",function(){z.hide()});return{show:function(e,b){q("freshPopOverOn");g("bb","popoverLatency"+m("freshPopOverOn"));a.history&&a.history.pushState&&a.history.pushState({popup:1},
"");B.setAsin(e,{beforeUpdate:function(a){if(a.loading)return q("freshPopOverLoading"),a;var u=(new l(a.images[0])).autoCrop().scaleXY(500,400).build(),u={url:b,image:u,actionUrl:{action:"/gp/product/handle-buy-box/"+function(a){return a.substring(a.indexOf("/ref=")+1,a.length)}(b)}};a.reviews&&(u.reviews=v.extend({},a.reviews,{url:b+"#customerReviews"}));v.when(x[e],w[e]).done(function(a,b){C.showSims(e,a)});x[e].fail(C.setNoSimView);g("cf","popoverLatency"+m("freshPopOverOn"));return v.extend({},
a,u)}});z.show()},hide:function(){z.hide()}}}});b.when("jQuery","sg-media-builder","gw-productdb").register("gw-sims",function(c,k,h){return function(n){function l(e,b){a.uet&&a.uet(e,b,{wb:1})}function p(e){if(a.ue&&"function"===typeof a.ue.count)return a.ue.count(e)||0}function d(e){a.ue&&"function"===typeof a.ue.count&&a.ue.count(e,(a.ue.count(e)||0)+1)}function g(){if(!C){C=!0;H.hide();G.show();D.animate({height:"100%"},300);var e=0,b=0,g=0,u=parseInt(G.css("width"),10),m=G.find(".sims-img-link");
m.each(function(a,m){e+=m.clientWidth;u<e?c(m).hide():(b=e,g+=1)});var d=u-b;0<d&&(d=Math.floor(20+d/g-1),20<d&&m.css({"padding-right":d/2+"px","padding-left":d/2+"px"}));m="popoverLatency"+p("freshPopOverOn");l("be",m);a.uex&&a.uex("ld",m,{wb:1})}}function m(){0===--t&&g()}function q(a,b){var g=c("<a>"),u=c("<div>");g.attr("class","sims-img-link");u.addClass("sims-img-border");b&&g.addClass("selected");g.click(function(){d("freshPopOverSimsClick");G.find(".sims-img-link").removeClass("selected");
c(this).addClass("selected");n.clear();n.setAsin(a.asin,{beforeUpdate:function(b){b=c.extend(!0,{},a);var g=a.url;if(b.loading)d("freshPopOverLoading");else{var u=(new k(b.images[0])).autoCrop().scaleXY(500,400).build(),u={url:g,image:u,actionUrl:{action:"/gp/product/handle-buy-box/"+e(g)}};b.reviews&&(u.reviews=c.extend({},b.reviews,{url:g+"#customerReviews"}));b=c.extend({},b,u)}return b}})});return g.append(u)}function r(){c.each(u,function(a,b){b.url=b.url.replace(/ref=gw_pdb_pdt-[\d]+/,e(B)+
"&gw_sims-"+a)})}function e(a){return 0<=a.indexOf("redirect.html?")?a.replace(/.*redirect.html|(token|location)=.*?&/g,""):0<=a.indexOf("/ref=")?a.substring(a.indexOf("/ref=")+1,a.length):0<=a.indexOf("?")?a.substring(a.indexOf("?"),a.length):""}function f(){C=!1;r();var a=[];t=u.length>t?t:u.length;c(u).each(function(e,b){b.loading=!1;if(b.images[0].src){var g=(new k(b.images[0])).autoCrop().scaleXY(130,100).build().src,u=c("<img>");u.attr("src",g);u.attr("class","sims-img");u.load(m);g=c("<div>");
g.attr("class","sims-img-container");var d=c("<div>");d.addClass("sims-img-overlay");c(g).append(d);g.append(u);u=q(b,0===e);u.append(g);a.push(u)}return e<t-1});t=a.length;c(a).each(function(a,e){G.append(e)});setTimeout(g,z)}function v(){b.when("gw-popover").execute(function(a){a.hide()})}function w(){H.hide();D.addClass("hidden");A.bind("click",v)}function x(){G.empty();D.add(H).removeAttr("style");D.removeClass("hidden");A.unbind("click",v);H.show();G.hide();t=8;u=[]}var t,u,B,z=1E4,C=!1,A=c("#sims-section"),
D=A.find(".sims-wrapper"),H=A.find(".sims-loading"),G=A.find(".sims-details");c("#gw-asin-popover");return{fetch:function(a,e,b,g){l("af","popoverLatency"+p("freshPopOverOn"));x();B=e;a.url=B;u.push(a);e=h.get(a.asin);setTimeout(b.reject,z);e.sims?b.resolve(e.sims):h._ajax('{"asins": [], "entityId":"'+a.asin+'","datasetId": "purchase"}',{id:"quicklook-sims-pdb"},{url:g}).done(function(e){if(e&&e.p&&0<e.p.length){var g=a.asin,u=e.p;u&&(h.get(g).sims||h.addSims(g,u));return b.resolve(e.p)}return b.reject()}).fail(b.reject);
return b},setNoSimView:w,showSims:function(a,e){var b=h.get(a);b.loading?d("freshPopOverSimLoadBeforePrimeAsin"):u=b.sims?c.merge([b],b.sims):c.merge([b],e);4<u.length?f():(d("simsLessThanThreshold"),w())},resetSimData:x,setWaitPeriod:function(a){z=a}}}});b.when("A").execute(function(c){var k=c.$,h,n;if(!c.$("html").hasClass("a-touch"))if(a.cvox)a.ue&&a.ue.tag&&a.ue.tag("screenReaderOn");else{k("#a-page").delegate("*[data-sgproduct] #gw-quick-look-btn","click",function(a){k(a.target).closest(".deals-shoveler").length||
l(a)});k("#a-page").delegate(".bestseller-list *[data-sgproduct]","click",function(a){l(a)});b.when("gw-popover").execute(function(a){h=a;k("#gw-popover-close").click(function(){h.hide()});n&&h.show.apply(h,n)});var l=function(a){if(!(1<a.which||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey)){var b,g;k(a.target).parents(".bestseller-list").length?(b=k(a.currentTarget).data("sgproduct"),g=k(a.target).closest("a").attr("href")):(b=k("#gw-quick-look-btn").closest("*[data-sgproduct]").data("sgproduct"),
g=k("#gw-quick-look-btn").siblings().children("a").attr("href"));var m=[b.asin,g];b.asin&&g&&(a.preventDefault(),h?h.show.apply(h,m):n=m)}}}});b.when("jQuery","dombinder").register("productdb-binding-helper",function(a,b){function h(b,l){return a.isFunction(b)?b(l):l}return function(a,c){function p(a,g){b.update(e,m(g.beforeUpdate,a));a.loading||m(g.load,a)}function d(a){g();r=function(){a(q)};q.pdb_observe(r)}function g(){q&&r&&(q.pdb_unobserve(r),r=null)}var m=h,q=null,r=null,e=b.init(c);
this.setAsin=function(e,b){b=b||{};g();q=a.get(e);p(q,b);q.loading&&d(function(a){p(a,b)});return q};this.clear=function(){g();q={};b.update(e,q)}}});a.P&&b.when("jQuery","afterLoad").register("gw-resource-logger",function(b){return{instrumentResources:function(k){var h;h=!1;if(b.isArray(k)&&!b.isEmptyObject(k)){h=!0;for(var n=0;n<k.length;n++){var l=k[n];if("id"in l&&"regex"in l&&"initiator"in l){if(!("string"===typeof l.id&&"string"===typeof l.initiator&&l.regex instanceof RegExp)){h=!1;break}}else{h=
!1;break}}}n=a.performance&&"function"===typeof a.performance.getEntriesByType&&"undefined"!==typeof a.performance.getEntriesByType("resource")&&"undefined"!==typeof a.ue;if(h&&n){h=Array(k.length);for(n=0;n<h.length;n++)h[n]=!1;for(l=n=0;l<a.performance.getEntriesByType("resource").length&&n<k.length;l++)for(var p=a.performance.getEntriesByType("resource")[l],d=p.name,g=p.initiatorType,m=0;m<k.length;m++)if(!h[m]){var q=k[m].regex;if(g===k[m].initiator&&q.test(d)){d=k[m].id;g=p;p=g.duration;a.ue.count&&
(a.ue.count(d+":duration",p),a.ue.count(d+":startTime",g.startTime));a.ue.tag&&(g=void 0,g=50>p?d+":cached":d+":notCached",a.ue.tag(g));h[m]=!0;n++;break}}}}}});b.register("sg-media-builder",function(){return function(a){var b=this,h=a.src,n=[];b.build=function(){var b=n.join("_");return{src:h.replace(/\.([^.]+)$/,"._"+b+"_.$1"),alt:a.alt}};b.autoCrop=function(){n.push("AC");return b};b.scaleX=function(a){n.push("SX"+a);return b};b.scaleY=function(a){n.push("SY"+a);return b};b.upScaleX=
function(a){n.push("UX"+a);return b};b.upScaleY=function(a){n.push("UY"+a);return b};b.scaleXY=function(a,c){return b.upScaleX(a).scaleY(c)}}});b.when("jQuery","gwAjax").register("shogunProductDB",function(b,k){function h(a){var d=[];l[a]={loading:!0,pdb_observe:function(a){d.push(a)},pdb_unobserve:function(a){d=b.grep(d,function(b){return b!==a})},_trigger:function(){b.each(d,function(){this.call(l[a])})}};return l[a]}function n(p,d){this.ajaxUrl=p;this.experienceStr=d;this._add=function(a){a.p&&
b.each(a.p,function(a,g){if(g.asin){var d=l[g.asin]||h(g.asin);b.extend(d,g,{loading:!1,error:!1});d._trigger(g)}})};this.addSims=function(a,m){if(m){var d=l[a]||h(a);b.extend(d,{sims:m});d._trigger(a)}};this._ajax=function(g,m,q){q=q||{};g=b.extend(!0,{},p,{params:{sa:g,oe:d}},q);a.ue_id&&(g.params.rrid=a.ue_id);return k(g.url,{method:g.method,params:g.params,success:m.success,error:m.error,id:"gw-jslibs-"+m.id})};this.get=function(a){return a in l?l[a]:h(a)}}var l={};return function(a,b){return new n(a,
b)}});b.when("jQuery","p-detect").register("component-feed-carousel",function(c,k){var h=c.extend(!0,{},k);c.each({pointerPrefix:function(){return"onmspointerup"in document||"onpointerup"in document?"onpointerup"in document?"pointer":"MSPointer":!1},actionMode:function(){var a=h.capabilities.pointerPrefix;return a?a:h.capabilities.touch?"touch":"mouse"}},function(a,b){h.capabilities[a]=b()});var n={};c.each({start:{mouse:"down",touch:"start",pointer:"down",MSPointer:"Down"},end:{mouse:"up",
touch:"end",pointer:"up",MSPointer:"Up"}},function(a,b){var g=h.capabilities.actionMode,m="string"===typeof b?b:b[g];n[a]=m?g+m:b.mouse===f?"":"mouse"+b.mouse});h.action=n;var l=function(a,b,g,m){this.init(a,b,g,m)};l.prototype={init:function(p,d,g,m){var q=this;c("html").hasClass("a-touch")&&p.addClass("feed-carousel-touch");q.config=m||{};q.adjustMarginOnChange=!1!==q.config.adjustMarginOnChange;q.defaultCssRightMargin=null;q.minItems=d||10;q.imgClass=".product-image";q.$carousel=p;q.cfMinItems=
g||6;q.cfFired=!1;q.shovelerReadyFired=!1;q.slotId=q.getSlotId();q.touch=q.$carousel.hasClass("feed-carousel-touch");q.ajaxSource=q.$carousel.parent().hasClass("ajaxSource");q.$shelf=q.$carousel.find(".feed-carousel-shelf");q.$viewport=q.$carousel.find(".feed-carousel-viewport");q.$spinner=q.$carousel.find(".spinner");q.$left=c(".feed-carousel-control.feed-left",p);q.$right=c(".feed-carousel-control.feed-right",p);q.$buttons=c(".feed-carousel-control",p);q.$thumb=c(".feed-scrollbar-thumb",p);q.shelfLeft=
-1*parseInt(q.$shelf.css("left"),10);q.calcWidth=c("html").hasClass("a-lt-ie9");q.noOpacity=c("html").hasClass("a-lt-ie9");q.uniqueId=q.getUniqueId();q.$left.attr("aria-hidden",!0);q.$right.attr("aria-hidden",!0);q.bindEvents();q.$carousel.data("Carousel",q);q.$carousel.trigger("change");q.token=!1;q.lock=function(){q.token=!0};q.unlock=function(){q.token=!1};q.locked=function(){return q.token};b.when("gw-first-carousel").execute(function(){q.first=q.$carousel.hasClass("first-carousel");q.shouldControlsOn()?
q.showControls():q.hideControls()});q.uniqueId&&b.when(q.uniqueId).execute(function(b){q.appendCards(b.cards);if(b.cards&&q.slotId&&"object"===typeof a.ue&&"function"===typeof a.ue.count){var e="gw-"+q.slotId.toString()+"-lazy-cards",g="gw-"+q.slotId.toString()+"-lazy";a.ue.count(e,(a.ue.count(e)||0)+b.cards.length);a.ue.count(g,(a.ue.count(g)||0)+1)}})},getUniqueId:function(){if(this.$viewport){var a=this.$viewport.closest(".shogun-widget");return 0<a.length?c(a[0]).attr("id"):null}},getSlotId:function(){var a=
this.$carousel.closest(".gw-widget-instrument");return 0<a.length?c(a[0]).attr("id"):null},bindEvents:function(){function b(a){return h.capabilities.pointerPrefix&&-1<c.inArray(a.originalEvent.pointerType,[2,"touch"])||"touch"===h.capabilities.actionMode}var d=this,g=c("body");d.$buttons.ready(function(b){d.shovelerReadyFired||(d.slotId&&(b=d.slotId.toString()+"-active",a.GWI&&a.GWI.recordLatency(b),a.GWI&&a.GWI.register(b)),d.shovelerReadyFired=!0)});d.$carousel.change(function(a){d.updateItems();
d.updateSpinner();d.updateShelf();d.updateControls();null===d.defaultCssRightMargin&&d.$shelf.children("li").first()&&(a=parseInt(d.$shelf.children("li").first().css("margin-right"),10),d.defaultCssRightMargin=isNaN(a)?10:a);d.adjustMarginOnChange&&d.adjustCardMargin()});d.$left.click(function(a){a.preventDefault();d.changePage(-1);d.slotId&&d.logCounter("gw-"+d.slotId.toString()+"-left")});d.$right.click(function(a){a.preventDefault();d.changePage(1);d.slotId&&d.logCounter("gw-"+d.slotId.toString()+
"-right")});d.bindImageLoadEvents(d.$shelf);var m;c(a).resize(function(){clearTimeout(m);m=setTimeout(function(){var a=d.getDimensions(),a=Math.max(Math.min(a.shelfLeft,a.maxLeft),0);d.moveShelf(a)},100)});d.$thumb.mousedown(function(a){var b=a.clientX;1===a.which&&(a.preventDefault(),d.$carousel.addClass("scrolling"),g.bind("mousemove.feed-carousel",function(a){var g=d.getDimensions(),g=Math.max(Math.min(g.shelfLeft+1/g.pageRatio*(a.clientX-b),g.maxLeft),0);b=a.clientX;d.moveShelf(g)}),c(document).bind("selectstart.feed-carousel",
function(){return!1}))});g.add(a).mouseup(function(a){d.$carousel.removeClass("scrolling");d.$carousel.hasClass("hovering")||d.hideControls();g.unbind("mousemove.feed-carousel");c(document).unbind("selectstart.feed-carousel")});d.$carousel.hover(function(){d.$carousel.addClass("hovering");clearTimeout(d.hoverTimer);d.hoverTimer=setTimeout(function(){d.$carousel.hasClass("hovering")&&!d.$carousel.hasClass("touching")?d.showControls():d.$carousel.removeClass("touching")},300)},function(){d.$carousel.removeClass("hovering touching");
clearTimeout(d.hoverTimer);d.$carousel.hasClass("scrolling")||(d.hoverTimer=setTimeout(function(){d.$carousel.hasClass("hovering")||d.hideControls()},600))});d.$carousel.bind(h.action.start,function(a){b(a)&&(d.$carousel.addClass("touching"),clearTimeout(d.touchTimer),d.touchTimer=setTimeout(function(){d.$carousel.removeClass("touching")},5E3))});d.$carousel.bind(h.action.end,function(a){b(a)&&(d.$carousel.removeClass("touching"),clearTimeout(d.touchTimer),clearTimeout(d.hoverTimer))});d.$viewport.scroll(function(){d.shelfLeft=
d.$viewport.scrollLeft();d.updateControls()})},bindImageLoadEvents:function(a){var b=this;c(b.imgClass,a).one("load",function(){b.$carousel.trigger("change")})},getDimensions:function(){var a=this.$shelf.width(),b=this.shelfLeft,g=this.$carousel.width();return{pageWidth:g,shelfWidth:a,shelfLeft:b,pageRatio:g/a,leftRatio:b/a,maxLeft:a-g}},updateItems:function(){var b=this,d=b.$shelf.find(".feed-carousel-card"),g=function(a){return"none"===a.css("display")};d.each(function(m,d){var r=c(d);if(!g(r)&&
!b.config.visibleBeforeLoad)return!0;r.attr("aria-posinset",m+1);r.attr("aria-hidden",!1);r.attr("role","listitem");return 0>=r.find(b.imgClass).filter(function(){return!this.complete}).length?(r.css("display","inline-block"),m+1>=b.cfMinItems&&!b.cfFired&&(b.slotId&&(r=b.slotId.toString()+"-visible",a.GWI&&a.GWI.recordLatency(r),a.GWI&&a.GWI.register(r)),b.cfFired=!0),!0):!1});d.attr("aria-setsize",d.size());b.$items=d.filter(function(){return!g(c(this))})},updateShelf:function(){var a=0;this.calcWidth&&
(this.$shelf.children().each(function(){a+=c(this).outerWidth(!0)}),this.$shelf.width(a));this.touch&&this.$carousel.not(".fresh-shoveler-tablet-app .feed-carousel").height(this.$shelf.outerHeight(!0))},updateSpinner:function(){this.size()<this.minItems&&this.ajaxSource?this.$spinner.show():(this.size()<this.minItems&&"object"===typeof a.ue&&"function"===typeof a.ue.count&&a.ue.count("shovelerNotEnoughItem",(a.ue.count("shovelerNotEnoughItem")||0)+1),this.$spinner.hide())},updateControls:function(){this.updateArrows();
this.updateScrollThumb()},shouldControlsOn:function(){return this.first&&!this.touch},showControls:function(a){this.$thumb.add(this.$buttons).stop(!0,!0).fadeIn({duration:300,complete:a,queue:!1})},hideControls:function(a){var b=this.$thumb;this.shouldControlsOn()||(b=b.add(this.$buttons));b.stop(!0,!0).fadeOut({duration:300,complete:a,queue:!1})},appendCards:function(a){this.$shelf.append(a);this.bindImageLoadEvents(a);this.$carousel.trigger("change")},updateArrows:function(){var a=this,b=a.getDimensions();
c.each([{$e:a.$left,enabled:0<b.shelfLeft},{$e:a.$right,enabled:b.shelfLeft<b.maxLeft}],function(b,m){var d=m.$e;m.enabled?d.removeClass("feed-control-disabled"):d.addClass("feed-control-disabled");a.noOpacity&&(m.enabled?d.css("opacity","1"):d.css("opacity","0.5"))})},updateScrollThumb:function(){var a=this.getDimensions(),b=a.leftRatio*a.pageWidth,a=Math.min(a.pageRatio*a.pageWidth,a.pageWidth);this.$thumb.width(a).each(function(){c(this).animate({left:b},0)})},logCounter:function(b){"object"===
typeof a.ue&&"function"===typeof a.ue.count&&(a.ue.count(b,(a.ue.count(b)||0)+1),a.ue.count("gw-shoveler-click",1))},changePage:function(a){var b=this.getDimensions(),g=this.alignWithItem(b.shelfLeft+a*b.pageWidth),g=Math.min(0>a?g.right:g.left,b.maxLeft);this.locked()||(this.lock(),b.shelfLeft===g?(this.bounce(this.$shelf,-30*a),this.bounce(this.$thumb,6*a)):this.moveShelf(g,400))},moveShelf:function(a,b){function g(){m.updateArrows();m.unlock()}var m=this;b=b||0;m.shelfLeft=a;if(m.touch)m.$viewport.animate({scrollLeft:a},
b,"swing",g);else{var q=m.getDimensions(),q=a/q.shelfWidth*q.pageWidth;m.$shelf.animate({left:-a},b,"swing",g);m.$thumb.animate({left:q},b,"swing",function(){m.updateScrollThumb();m.unlock()})}},getItems:function(){return this.$items},size:function(){return this.getItems().length},alignWithItem:function(a){if(0>a)return{left:0,right:0};var b=this,g=b.getItems(),m=g.map(function(){var g=b.cardPosition(c(this));if(a>=g.left&&a<=g.right)return g}).get(0);return m?m:b.cardPosition(g.last())},cardPosition:function(a){var b=
(a.position()||{left:0,right:0}).left;a=b+a.outerWidth(!0);return{left:b,right:a}},bounce:function(a,b){function g(a){var b={};b[m.touch?"left":"marginLeft"]=a;return b}var m=this;a.each(function(){var a=c(this);a.animate(g(b),400,"swing",function(){a.animate(g(0),100,"swing",m.unlock)})})},setCardMargin:function(a){this.$shelf.children("li").first()&&this.$shelf.children("li").first().css("margin-right")!==a+"px"&&(this.$shelf.children("li").css("margin-right",a+"px"),this.updateShelf())},adjustCardMargin:function(a){a=
a===f||null===a?this.defaultCssRightMargin:a;this.setCardMargin(a);var b=this.getDimensions(),b=0>b.maxLeft?Math.ceil(-b.maxLeft/this.size()):a;this.setCardMargin(b<a?a:b)}};return{createCarousel:function(a,b,g,m){c(a).each(function(a,r){var e=c(r);new l(e,b,g,m)})}}});b.when("jQuery","SafeP").execute("shoveler-lazy-non-visible-images",function(c,k){function h(a){"object"===typeof l.ue&&"function"===typeof l.ue.count&&l.ue.count(a,(l.ue.count(a)||0)+1)}function n(){l.GWData&&c.each(l.GWData,
function(a,b){if(a&&b&&b.data&&!b.loaded){b.loaded=!0;h("gw-lazy-load-all");var g=[];c.each(b.data,function(a,b){c.each(c(b),function(a,b){g.push(b)})});g&&0<g.length&&h("gw-lazy-load-non-empty");k&&k.register(a,function(){return{cards:g}})}})}var l=a;b.when("x1").execute(n);b.when("ready").execute(n);b.when("load").execute(n)});b.register("SafeP",function(){var a={};return{register:function(k,h){"string"===typeof k&&"function"===typeof h&&(a[k]||(a[k]=function(h,l){b.register(h,l);a[h]=
function(){}}),a[k]&&a[k](k,h))}}});b.when("A").register("resizeable-inline-video",function(c){function k(a,b){"function"===typeof l.uet&&b&&l.uet(a,b,{wb:1})}function h(a,b){"function"===typeof l.uex&&b&&l.uex(a,b,{wb:1})}var n=c.$,l=a;return function(a,d,g){function m(){C.removeClass("player-uncommenced viewport-loaded").addClass("viewport-loading player-loading");t.css("z-index",1).css("opacity",1);k("tc","airyInlineVideoLoadingMonitor");k("tc",g.loadingScope);k("bb","airyInlineVideoPlaybackMonitor");
k("bb",g.playbackScope)}function q(a){a=a||{};return{play:a.play||A,stop:a.stop||A,resize:a.resize||A,airyReady:a.airyReady||A}}function r(){return new q({airyReady:function(a){m();D=new f(a);D.play()},stop:function(){var a;a=A;x.removeClass("viewport-loading").addClass("viewport-loaded");t.css("z-index",-1).css("opacity",0);B.length&&u.hide();a()}})}function e(a){return new q({play:function(){D=new f(a);u.fadeOut(1E3,function(){u.css("display","block");u.css("visibility","hidden");m();D.play()})}})}
function f(a){return new q({play:function(){z.removeClass("viewport-loading").addClass("viewport-loaded");C.removeClass("player-loading");k("be","airyInlineVideoLoadingMonitor");k("be",g.loadingScope);h("ld","airyInlineVideoLoadingMonitor");h("ld",g.loadingScope);D=new v(a)}})}function v(a){return new q({stop:function(){D=new w(a);a.pause()}})}function w(a){return new q({})}var x=n(a),t=x.find(".airy-video-container"),u=x.find(".image-map-before"),B=x.find(".image-map-after"),z=x.find(".airy-video-viewport-in"),
C=x.add(z),A=function(){},D;g=g||{};k("bb","airyInlineVideoLoadingMonitor");k("bb",g.loadingScope);D=new function(a){function u(a){function b(a){"object"===typeof l.ue&&"function"===typeof l.ue.count&&l.ue.count(a,(l.ue.count(a)||0)+1)}d.bindings={loadedmetadata:function(a,b){D.airyReady(e);k("cf","airyInlineVideoLoadingMonitor");k("cf",g.loadingScope)},videounsupportederror:function(a,e){b("airyResizableInlineVideoUnsupportedError")},decodeerror:function(a,e){b("airyResizableInlineVideoDecodeError")},
networkerror:function(a,e){b("airyResizableInlineVideoNetworkError")},undefinederror:function(a,e){b("airyResizableInlineVideoUndefinedError")},beganplaying:function(){D.play()},ended:function(){k("af","airyInlineVideoPlaybackMonitor");k("af",g.playbackScope);D.stop()}};var e=a.embed(d);g.autoPlay&&e.play({isAsync:!0})}a=a||{};l.gwAiryAssetLoaded||(l.gwAiryAssetLoaded=a,a.js&&b.load.js(a.js),a.css&&b.load.css(a.css));C.addClass("player-uncommenced");g.whenReady?b.when("Airy","ready").execute(u):b.when("Airy").execute(u);
return new q({airyReady:function(a){D=new e(a);D.play()},play:function(){D=new r}})}(g.airyAssetUrls);(function(){c.on("resize",function(){D.resize()})})()}});b.when("A").register("gw-count-down",function(a){return function(b,h,n,l,p){function d(a){a=a||{};return{update:a.update||v.noop,count:a.count||v.noop,transition:a.transition||v.noop}}function g(b,e){return d({update:function(){f(b);a.trigger(e)}})}function m(){B=p.starts_in;return d({update:function(){a.trigger(H);f(z)},transition:function(){F=
g(p.started,A);F.update()},count:function(){u=setInterval(function(){h=x-Date.now();r(h,p.starts_in_timer)},1E3)}})}function q(){B=p.ends_in;return d({update:function(){f(z)},transition:function(){F=g(p.has_ended,C);F.update()},count:function(){u=setInterval(function(){n=t-Date.now();r(n,p.ends_in_timer)},1E3)}})}function r(a,b){var g,m,d;g=Math.floor(a/36E5);m=Math.floor(a/1E3/60%60);d=Math.floor(a/1E3%60);var q=z,c;c=B+" "+e(g)+e(m,!0,!0)+e(d,!1,!0);q.timerString=c;q=z;g=b?b.replace("_hours_",g).replace("_minutes_",
m).replace("_seconds_",d):"";q.readoutString=g;f(z);0>=a&&(clearInterval(u),F.transition())}function e(a,b,e){var g="";if(0<a||e)g=("0"+a).slice(-2);if(!e&&0<a||b)g+=":";return g}function f(b){b.readoutString?z=b:(z.readoutString=b,z.timerString=b);a.trigger(D,z)}h=parseInt(h,10);n=parseInt(n,10);l=JSON.parse(l);var v=a.$,w=Date.now(),x=w+h,t=w+n,u,B="",z={timerString:"",readoutString:""},C=b+"ended",A=b+"started",D=b+"updateTimer",H=b+"countingDown",G=b+"soldOut",F=function(){return d({update:function(){if(l&&
l.dealState){var a=l.dealState.toUpperCase();F="AVAILABLE"===a&&86400<n/1E3?g(""):-1<a.indexOf("WAITLIST")?g(p.on_waitlist):"SOLDOUT"===a?g(p.sold_out,G):0<h?m():0<n?q():g(p.has_ended,C)}F.update();F.count()}})}();F.update();a.on(b,function(){F.update()})}})});